(this.webpackJsonphackernews=this.webpackJsonphackernews||[]).push([[0],{19:function(e,t,a){e.exports=a(39)},24:function(e,t,a){},25:function(e,t,a){},26:function(e,t,a){},27:function(e,t,a){},28:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){},31:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(16),o=a.n(r),c=(a(24),a(25),a(26),a(27),a(18)),i=a(4),m=a(5),l=a(6),u=a(7),h=a(9),d=a(1);a(28);var f=function(){return s.a.createElement("header",{className:"header"},s.a.createElement("div",{className:"container clearfix"},s.a.createElement("h1",{className:"header__brand"},s.a.createElement("a",{href:"/hackernews",className:"header__link"},"Fresh Hacker News"))))};a(29);var y=function(e,t,a){e(),fetch("https://hacker-news.firebaseio.com/v0/item/".concat(a,".json")).then((function(e){return e.json()})).then((function(a){t(a),e()})).catch((function(e){return console.log(e)}))};function g(){return s.a.createElement("img",{className:"loading-img",src:"./assets/images/loading.svg",alt:"Loading page"})}function _(){return s.a.createElement("img",{src:"./assets/images/text-loading.svg",alt:"Loading text",className:"loading-txt"})}a(30);var E=function(e){var t=new Date,a=(t=Math.floor(t.getTime()/1e3))-e;if(a<60)return a+" seconds ago";var n=Math.floor(a/60);if(n<60)return n+" minutes ago";var s=Math.floor(n/60);return s<24?s+" hours ago":Math.floor(s/24)+" days "+(s%=24)+" hours ago"},p=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).setComment=function(e){n.setState({comment:e})},n.toggleLoading=function(){n.setState({isLoading:!n.state.isLoading})},n.state={comment:null,isLoading:!1},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.id;y(this.toggleLoading,this.setComment,e)}},{key:"shouldComponentUpdate",value:function(e,t){return!t.isLoading||!this.state.isLoading}},{key:"render",value:function(){return this.state.comment&&this.state.comment.deleted?null:s.a.createElement("div",{className:"comment"},this.state.isLoading||!this.state.comment?s.a.createElement(_,null):s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{className:"comment__user"},this.state.comment.by),s.a.createElement("span",{className:"comment__time"},E(this.state.comment.time)),s.a.createElement("div",{className:"comment__text",dangerouslySetInnerHTML:{__html:this.state.comment.text}}),this.state.comment.kids&&this.state.comment.kids.length>0&&s.a.createElement("div",{className:"comment__nested"},this.state.comment.kids.map((function(e){return s.a.createElement(a,{key:e,id:e})})))))}}]),a}(n.Component),N=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).setStory=function(e){n.setState({story:e})},n.toggleLoading=function(){n.setState({isLoading:!n.state.isLoading})},n.state={story:"",isLoading:!1},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){if(this.props.location.aboutProps&&this.setState({story:this.props.location.aboutProps.story}),!this.props.location.aboutProps){var e=this.props.match.params.story_id;y(this.toggleLoading,this.setStory,e)}}},{key:"render",value:function(){return s.a.createElement("section",{className:"story-details"},s.a.createElement("div",{className:"container"},this.state.isLoading||!this.state.story?s.a.createElement(g,null):s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"story-details__head"},s.a.createElement("h2",{className:"story-details__title"},s.a.createElement("a",{href:this.state.story.url,className:"story-details__link"},this.state.story.title)),s.a.createElement("p",{className:"story-details__info"},s.a.createElement("span",{className:"story-details__author"},"By: ",this.state.story.by)," ",s.a.createElement("span",{className:"story-details__score"},"Score: ",this.state.story.score)),s.a.createElement("div",null,s.a.createElement("span",{className:"story-details__comment-title"},"Comments"))),s.a.createElement("div",{className:"story-details__comments"},this.state.story.kids?this.state.story.kids.map((function(e){return s.a.createElement(p,{key:e,id:e})})):s.a.createElement("p",{className:"story-details__no-comments"},"No comments")))))}}]),a}(n.Component);var v=function(e,t,a){e(),fetch("https://hacker-news.firebaseio.com/v0/topstories.json").then((function(e){return e.json()})).then((function(n){return e(),n.slice(a,a+20).map((function(a){return e(),fetch("https://hacker-news.firebaseio.com/v0/item/".concat(a,".json")).then((function(e){return e.json()})).then((function(a){e(),t(a)})).catch((function(e){return console.log(e)}))}))})).catch((function(e){return console.log(e)}))};a(31);var b=function(e){return s.a.createElement(h.b,{to:{pathname:"/hackernews/"+e.story.id,aboutProps:{story:e.story}}},s.a.createElement("li",{className:"story"},s.a.createElement("h2",{className:"story__title"},e.currentStoryNumber+e.index+1,". ",e.story.title),s.a.createElement("p",{className:"story__info"},s.a.createElement("span",{className:"story__info-item story__info-item--author"},"By : ",e.story.by),s.a.createElement("span",{className:"story__info-item story__info-item--score"},"Score : ",e.story.score),s.a.createElement("span",{className:"story__info-item story__info-item--comments"},"Comments : ",e.story.descendants),s.a.createElement("span",{className:"story__info-item story__info-item--time"},"Time : ",E(e.story.time)))))};a(37);var S=function(e){return s.a.createElement("button",{className:"btn ".concat(e.className||""),onClick:e.onClick},e.children)};a(38);var k=function(e){return s.a.createElement("section",{className:"stories"},s.a.createElement("div",{className:"container"},e.isLoading||e.stories.length<20?s.a.createElement(g,null):s.a.createElement(s.a.Fragment,null,s.a.createElement("ul",{className:"stories__list"},e.stories.map((function(t,a){return s.a.createElement(b,{key:t.id,story:t,index:a,currentStoryNumber:e.currentStoryNumber})}))),s.a.createElement("div",{className:"stories__nav"},s.a.createElement(S,{className:"btn-nav",onClick:function(){return e.goAnotherPage("left")}},s.a.createElement("i",{className:"fas fa-caret-left"})),s.a.createElement("span",{className:"stories__page-number"},e.currentStoryNumber/20+1),s.a.createElement(S,{className:"btn-nav",onClick:function(){return e.goAnotherPage("right")}},s.a.createElement("i",{className:"fas fa-caret-right"}))))))},L=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).toggleLoading=function(){n.setState({isLoading:!n.state.isLoading})},n.addStory=function(e){var t=[].concat(Object(c.a)(n.state.stories),[e]);n.setState({stories:t})},n.goAnotherPage=function(e){var t=[];if("left"===e){var a=n.state.currentStoryNumber<20?0:n.state.currentStoryNumber-20;n.setState({currentStoryNumber:a,stories:t},(function(){return n.loadStories()}))}if("right"===e){var s=n.state.currentStoryNumber>400?400:n.state.currentStoryNumber+20;n.setState({currentStoryNumber:s,stories:t},(function(){return n.loadStories()}))}},n.loadStories=function(){v(n.toggleLoading,n.addStory,n.state.currentStoryNumber)},n.state={stories:[],isLoading:!1,currentStoryNumber:0},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.loadStories()}},{key:"render",value:function(){var e=this;return s.a.createElement(h.a,null,s.a.createElement("div",{className:"App"},s.a.createElement(f,null),s.a.createElement(d.a,{exact:!0,path:"/hackernews",render:function(t){return s.a.createElement(k,Object.assign({},t,{isLoading:e.state.isLoading,stories:e.state.stories,currentStoryNumber:e.state.currentStoryNumber,goAnotherPage:e.goAnotherPage}))}}),s.a.createElement(d.a,{path:"/hackernews/:story_id",component:N})))}}]),a}(n.Component);o.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(L,null)),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.1f04a95c.chunk.js.map